许多 Google Cloud 资源可以具有内部 IP 地址和外部 IP 地址。例如，您可以向 Compute Engine 虚拟机 (VM) 实例分配内部 IP 地址和外部 IP 地址。实例使用这些地址与其他 Google Cloud 资源和外部系统进行通信。

每个虚拟机实例网络接口都必须具有一个主要内部 IPv4 地址。每个网络接口还可以具有一个或多个别名 IPv4 范围和一个外部 IPv4 地址。如果虚拟机连接到支持 IPv6 的子网，则每个网络接口还可以分配内部或外部 IPv6 地址。

实例可以使用虚拟机的内部 IPv4 地址与同一 Virtual Private Cloud (VPC) 网络上的实例进行通信。如果虚拟机已配置 IPv6，您还可以使用虚拟机的内部或外部 IPv6 地址。最佳做法是使用内部 IPv6 地址进行内部通信。

如需与互联网进行通信，您可以使用实例上配置的外部 IPv4 地址或外部 IPv6 地址。如果实例上未配置外部地址，则 Cloud NAT 可用于 IPv4 流量。

如需了解如何识别实例的内部和外部 IP 地址，请参阅查找实例的外部和内部 IP 地址。

自行试用 
如果您是 Google Cloud 新手，请创建一个帐号来评估 Compute Engine 在实际场景中的表现。新客户还可获享 $300 赠金，用于运行、测试和部署工作负载。

免费试用 Compute Engine

外部 IPv4 和 IPv6 地址
如果您需要与互联网进行通信或与其他 VPC 网络中的资源进行通信，则可以向实例分配外部 IPv4 或 IPv6 地址。如果防火墙规则或分层防火墙政策允许连接，则 VPC 网络外部的来源可以使用其外部 IP 地址访问特定资源。只有具有外部 IP 地址的资源才能与 VPC 网络外部的资源直接通信。与使用外部 IP 地址的资源进行通信可能会产生额外的结算费用。

外部 IPv4 地址适用于所有虚拟机。在虚拟机接口上配置外部 IPv4 地址时，系统会从 Google 的外部 IPv4 地址范围中分配单个 IPv4 地址。如需了解详情，请参阅在何处可以找到 Compute Engine IP 地址范围。

外部 IPv6 地址可供连接到具有外部 IPv6 范围的子网的虚拟机使用。当您在虚拟机接口上配置外部 IPv6 地址时，系统会从子网的外部 IPv6 范围中分配一个 /96 IPv6 地址范围。

您还可以从子网的 IPv6 范围中预留静态外部 IPv6 地址，并将其分配给虚拟机（预览版）。

内部 IPv4 和 IPv6 地址
虚拟机接口会从其连接的子网分配 IP 地址。每个虚拟机接口都有一个主要内部 IPv4 地址，该地址从子网的主要 IPv4 范围中分配。如果子网具有内部 IPv6 范围，则可以选择性地使用内部 IPv6 地址配置虚拟机接口。

内部 IPv4 地址可通过以下方式分配：
Compute Engine 会自动从主要 IPv4 子网范围分配一个 IPv4 地址。
您可以在创建虚拟机实例时分配特定的内部 IPv4 地址，也可以为项目预留静态内部 IPv4 地址并将该地址分配给虚拟机。
内部 IPv6 地址可以分配给连接到具有内部 IPv6 范围的子网的虚拟机。当您在虚拟机接口上配置内部 IPv6 地址时，系统会从子网的内部 IPv6 范围中分配一个 /96 IPv6 地址范围。
实例还可以具有别名 IP 地址和范围。如果您在一个虚拟机上运行多项服务，则可以向每项服务分配各自独一无二的 IP 地址。

内部 DNS 名称
Google Cloud 会自动将实例的完全限定 DNS 名称 (FQDN) 解析为实例的内部 IP 地址。内部 DNS 名称只能在实例的 VPC 网络内部使用。

如需详细了解完全限定域名 (FQDN)，请参阅内部 DNS。

后续步骤
查找实例的外部和内部 IP 地址。
保留新的静态外部 IP 地址
为新的虚拟机实例分配静态外部 IP 地址。
在创建实例时选择内部 IP 地址。
升级临时外部 IP 地址。
了解如何使用内部 DNS 名称通过内部 VPC 网络对实例进行寻址。
详细了解 IP 地址。
详细了解 IPv6。
详细了解 IP 地址和负载均衡。
查看外部 IP 地址价格。
